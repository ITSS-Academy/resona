@if (isLoading$ | async) {
  <div class="loading-container">
    <mat-spinner></mat-spinner>
  </div>
} @else {
  <div class="playlist-detail-container">
    <div class="playlist-header">
      <div class="playlist-bg">
        @if (playlistDetail) {
          <img [src]="playlistDetail.thumbnailPath" alt="background"/>
        }
      </div>

      <div class="playlist-info">
        @if (playlistDetail) {
          <img
            class="playlist-cover"
            [src]="playlistDetail.thumbnailPath"
            alt="Playlist Cover"
          />
        }

        <div class="right">
          <div class="playlist-text">
            <div class="name-and-time">
              <h2 class="playlist-title">
                {{ playlistDetail.title }}
                <!--              @if (playlistId !== 'happy-vibes' && playlistId !== 'chill-out') {-->
                <!--                <button mat-icon-button (click)="openEditDialog()">-->
                <!--                  <mat-icon>edit</mat-icon>-->
                <!--                </button>-->
                <!--              }-->
              </h2>

              @if (playlistDetail) {
                <p class="playlist-meta">
                  {{ playlistDetail.tracks?.length || 0 }} songs â€¢
                  {{ totalMinutes$ | async }}
                </p>
              }
            </div>
          </div>

          <div class="playlist-actions">
            <app-playlist-detail-button
              [playlistId]="playlistId"
              (addAllToQueue)="addAllToQueue()"
            ></app-playlist-detail-button>
            <button
              class="buttons"
              mat-fab
              (click)="deletePlaylist()"
              aria-label="Delete playlist"

            >
              <mat-icon>delete</mat-icon>
            </button>
            <!--            @if (userId == playlistOwnerId) {-->
            <!--              <button mat-icon-button (click)="openEditDialog()">-->
            <!--                <mat-icon>edit</mat-icon>-->
            <!--              </button>-->
            <!--            }-->
          </div>
        </div>
      </div>
    </div>

    <div class="playlist-table-header">
      <span class="col-name"># Name</span>
      <span class="col-artist"># Date</span>
      <span class="col-time"><mat-icon>schedule</mat-icon></span>
      <span class="col-views"><mat-icon>visibility</mat-icon></span>
      <!--      <span class="col-actions">-->
      <!--          <mat-icon>delete</mat-icon>-->
      <!--          <mat-checkbox></mat-checkbox>-->
      <!--        </span>-->
      <span class="col-list"> <span>#Action</span></span>
    </div>

    <div class="playlist-table-body">
      @for (track of playlistDetail.tracks; track $index) {
        <app-playlist-music-tab
          [track]="track"
          [playlistId]="playlistDetail.id"
          [playlistTitle]="playlistDetail.title"
          [isFavorite]="track.isFavorite || false"
        >
        </app-playlist-music-tab>
      }
    </div>
  </div>
}
